---
import { SEO } from 'astro-seo';
import '../styles/global.css';
import Navigation from '../components/organisms/Navigation.astro';
import BackToTop from '../components/atoms/BackToTop.astro';
import SchemaLocalBusiness from '../components/atoms/SchemaLocalBusiness.astro';

interface Props {
  title?: string;
  description?: string;
  ogImage?: string;
  keywords?: string | string[];
}

const {
  title = "SEO Agentur Duisburg - Professionelle Suchmaschinenoptimierung",
  description = "Ihre SEO-Agentur für Duisburg & Ruhrgebiet ✓ 18+ Jahre Erfahrung ✓ Individuell & transparent ✓ Nachhaltige Rankings ➤ Jetzt kostenlose SEO-Analyse sichern!",
  ogImage = "https://seo-duisburg.de/images/logo-seo-duisburg.png",
  keywords = [
    'SEO Duisburg',
    'SEO Agentur Duisburg',
    'Suchmaschinenoptimierung Duisburg',
    'Lokales SEO Duisburg',
    'SEO Beratung Ruhrgebiet'
  ]
} = Astro.props;

const canonicalUrl = Astro.url.href;
const keywordsContent = Array.isArray(keywords) ? keywords.join(', ') : (keywords ?? '');
---

<!doctype html>
<html lang="de" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content="Jedi Master Arnold Wender" />
    <link rel="preconnect" href="https://www.wendermedia.com" crossorigin />
    <link rel="preconnect" href="https://seo-duisburg.de" crossorigin />
    <link rel="preload" as="image" href={ogImage} />
    <link rel="preload" href="/fonts/lexend.woff2" as="font" type="font/woff2" crossorigin />
  {keywordsContent && <meta name="keywords" content={keywordsContent} />}
    <style is:inline>
      @font-face {
        font-family: 'Lexend Variable';
        font-style: normal;
        font-weight: 100 900;
        font-display: swap;
        src: local('Lexend Variable'), url('/fonts/lexend.woff2') format('woff2');
      }
      :root { 
        font-family: 'Lexend Variable', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        text-rendering: optimizeLegibility;
      }
    </style>
    <SEO
      title={title}
      description={description}
      openGraph={{
        basic: {
          title,
          type: "website",
          image: ogImage,
          url: canonicalUrl,
        },
        optional: {
          description,
          locale: "de_DE",
          siteName: "SEO-Duisburg.de",
        },
      }}
      twitter={{
        card: "summary_large_image",
        site: "@seoduisburg",
        creator: "@seoduisburg",
        title,
        description,
        image: ogImage,
      }}
      extend={{
        meta: [
          { name: "theme-color", content: "#1162a1" },
          { name: "mobile-web-app-capable", content: "yes" },
          { name: "apple-mobile-web-app-status-bar-style", content: "black" },
          { property: 'og:url', content: canonicalUrl },
          { property: 'og:site_name', content: 'SEO-Duisburg.de' },
          { property: 'og:locale', content: 'de_DE' },
          { property: 'og:title', content: title },
          { property: 'og:description', content: description },
          { property: 'og:image:alt', content: title },
          { name: 'twitter:title', content: title },
          { name: 'twitter:description', content: description },
          { name: 'twitter:image', content: ogImage },
        ],
        link: [
          { rel: "canonical", href: canonicalUrl },
          { rel: 'alternate', hreflang: 'de', href: canonicalUrl },
          { rel: 'alternate', hreflang: 'x-default', href: canonicalUrl },
        ],
      }}
    />
    <SchemaLocalBusiness />
  </head>
  <body class="min-h-screen bg-gray-50 font-sans antialiased dark:bg-gray-900 dark:text-white">
    <a href="#main" class="skip-link">Zum Hauptinhalt springen</a>
    <Navigation />
    <slot />
    <BackToTop />
  </body>
</html>